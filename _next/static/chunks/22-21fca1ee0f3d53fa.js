"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{7929:function(e,t,r){r.d(t,{Z:function(){return m}});var a=r(9268);let l=e=>{let t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=r.length,l=0;for(;l<e;)t+=r.charAt(Math.floor(Math.random()*a)),l+=1;return t};var n=r(6006),s=r(7075),i=r(2801),o=r(7743),c=r(7163),u=e=>{let{setMenuOpen:t,menuOpen:r}=e,{updateValue:l,waterLevel:n,waterTemplate:u,waterColor:d,waterOpacity:h}=(0,s.M)();return(0,a.jsxs)("fieldset",{className:"mt-0",children:[(0,a.jsxs)("button",{onClick:()=>t(e=>({...e,water:!e.water})),"aria-label":"open water options",className:"flex justify-between w-full my-4",children:[(0,a.jsx)("h2",{className:"text-lg",children:"Water"}),(0,a.jsx)(i.RiI,{})]}),(0,a.jsx)(o.M,{children:r.water&&(0,a.jsxs)(c.E.div,{animate:{opacity:1,height:"auto",transition:{opacity:{delay:.1}}},initial:{opacity:0,height:0},exit:{height:0,opacity:0,transition:{height:{delay:.1}}},children:[(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:["Colour",(0,a.jsx)("input",{type:"color",value:d,onChange:e=>l("waterColor",e.target.value)})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:["Realistic Water",(0,a.jsx)("input",{type:"checkbox",id:"water",name:"water",checked:u,onChange:()=>l("waterTemplate",!u)})]})}),(0,a.jsxs)("label",{children:["Water Opacity",(0,a.jsx)("input",{className:"w-full p-1 rounded-sm text-black",type:"range",min:"0",max:"10",value:h,onChange:e=>l("waterOpacity",e.target.value)})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:["Water Level",(0,a.jsx)("input",{className:"w-full p-1 rounded-sm text-black",type:"range",min:"0",max:"30",value:n,onChange:e=>l("waterLevel",e.target.value)})]})})]},"waterControls")})]})},d=e=>{let{menuOpen:t,setMenuOpen:r}=e,{fog:l,updateFog:n,noiseIterations:u,updateValue:d,amplitude:h,frequency:x}=(0,s.M)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>r(e=>({...e,environment:!e.environment})),"aria-label":"open environment options",className:"flex justify-between w-full mt-4",children:[(0,a.jsx)("h2",{className:"text-lg",children:"Environment"}),(0,a.jsx)(i.RiI,{})]}),(0,a.jsx)(o.M,{children:t.environment&&(0,a.jsxs)(c.E.div,{animate:{opacity:1,height:"auto",transition:{opacity:{delay:.1}}},initial:{opacity:0,height:0},exit:{height:0,opacity:0,transition:{height:{delay:.1}}},children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("label",{children:["Noise Cycles",(0,a.jsx)("input",{className:"w-full p-1 rounded-sm text-black",type:"number",value:u,onChange:e=>d("noiseIterations",e.target.value)})]}),(0,a.jsxs)("label",{className:"flex flex-col items-center  text-center",children:["Fog",(0,a.jsx)("input",{className:"mt-1",type:"checkbox",id:"fog",name:"fog",checked:l.on,onChange:()=>n(l.intensity,!l.on)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:["Amplitude",(0,a.jsx)("input",{className:"w-full p-1 rounded-sm text-black",type:"number",value:h,onChange:e=>d("amplitude",e.target.value)})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:["Frequency",(0,a.jsx)("input",{className:"w-full p-1 rounded-sm text-black",type:"number",value:x,onChange:e=>d("frequency",e.target.value)})]})})]})]},"waterControls")})]})},h=e=>{let{menuOpen:t,setMenuOpen:r}=e,{sandColor:l,sandSolidColor:n,updateValue:u}=(0,s.M)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>r(e=>({...e,sand:!e.sand})),"aria-label":"open environment options",className:"flex justify-between w-full mt-4",children:[(0,a.jsx)("h2",{className:"text-lg",children:"Sand"}),(0,a.jsx)(i.RiI,{})]}),(0,a.jsx)(o.M,{children:t.sand&&(0,a.jsx)(c.E.div,{animate:{opacity:1,height:"auto",transition:{opacity:{delay:.1}}},initial:{opacity:0,height:0},exit:{height:0,opacity:0,transition:{height:{delay:.1}}},children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:["Solid Colour",(0,a.jsx)("input",{type:"checkbox",checked:n,onChange:e=>u("sandSolidColor",!n)})]}),(0,a.jsxs)("label",{children:["Sand Colour Colour",(0,a.jsx)("input",{type:"color",value:l,onChange:e=>u("sandColor",e.target.value)})]})]})})},"waterControls")})]})},x=e=>{let{menuOpen:t,setMenuOpen:r}=e,{grassColor:l,grassSolidColor:n,updateValue:u}=(0,s.M)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>r(e=>({...e,grass:!e.grass})),"aria-label":"open environment options",className:"flex justify-between w-full mt-4",children:[(0,a.jsx)("h2",{className:"text-lg",children:"Grass"}),(0,a.jsx)(i.RiI,{})]}),(0,a.jsx)(o.M,{children:t.grass&&(0,a.jsx)(c.E.div,{animate:{opacity:1,height:"auto",transition:{opacity:{delay:.1}}},initial:{opacity:0,height:0},exit:{height:0,opacity:0,transition:{height:{delay:.1}}},children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:["Solid Colour",(0,a.jsx)("input",{type:"checkbox",checked:n,onChange:e=>u("grassSolidColor",!n)})]}),(0,a.jsxs)("label",{children:["Grass Colour Colour",(0,a.jsx)("input",{type:"color",value:l,onChange:e=>u("grassColor",e.target.value)})]})]})})},"grassControls")})]})},m=e=>{let t=l(8),{updateValue:r,height:i,width:o,resetTerrain:c}=(0,s.M)(),[m,g]=(0,n.useState)({water:!0,environment:!0,sand:!0,grass:!0});return(0,a.jsxs)("div",{className:"z-10 absolute top-5 right-5 bg-slate-800 text-white p-3 rounded-md shadow-lg w-60",children:[(0,a.jsx)("h1",{className:"text-white text-xl",children:"Terrain Customisations"}),(0,a.jsx)("hr",{}),(0,a.jsx)(u,{menuOpen:m,setMenuOpen:g}),(0,a.jsx)("hr",{}),(0,a.jsx)(d,{menuOpen:m,setMenuOpen:g}),(0,a.jsx)("hr",{className:"mt-4"}),(0,a.jsx)(h,{menuOpen:m,setMenuOpen:g}),(0,a.jsx)("hr",{className:"mt-4"}),(0,a.jsx)(x,{menuOpen:m,setMenuOpen:g}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("label",{children:["Width",(0,a.jsx)("input",{type:"number",onChange:e=>r("width",e.target.value),className:"w-full p-1 rounded-sm text-black",value:o})]}),(0,a.jsxs)("label",{children:["Height",(0,a.jsx)("input",{className:"w-full p-1 rounded-sm text-black",type:"number",onChange:e=>r("height",e.target.value),value:i})]})]}),(0,a.jsx)("a",{className:"flex justify-center p-2 items-center mt-4 bg-white rounded-md",href:"/generate/".concat(t),children:(0,a.jsx)("span",{className:"text-slate-800",children:"Generate New"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 col-4 mt-4",children:[(0,a.jsx)("button",{className:" underline",children:"Download"}),(0,a.jsx)("button",{className:" underline",onClick:()=>c(),children:"Reset"})]})]})]})}},9027:function(e,t,r){r.d(t,{Z:function(){return h}});var a=r(9268),l=r(6006),n=r(7804),s=r(7346),i=r(1578),o=r(414),c=r(7075);(0,i.e)({Water:o.B});var u=()=>{let e=(0,l.useRef)(null);(0,i.z)(e=>e.gl);let{waterLevel:t,waterTemplate:r,waterColor:s,waterOpacity:o,height:u,width:d}=(0,c.M)(),h=(0,i.D)(n.TextureLoader,"/images/waternormal3.jpeg");h.wrapS=h.wrapT=n.RepeatWrapping;let x=(0,l.useMemo)(()=>new n.PlaneGeometry(d,u),[d,u]),m=(0,l.useMemo)(()=>({textureWidth:512,textureHeight:512,waterNormals:h,sunDirection:new n.Vector3,sunColor:"yellow",waterColor:410227,distortionScale:2,fog:!1}),[h]);return(0,i.A)((t,r)=>{e.current&&(e.current.material.uniforms.time.value+=r/4)}),(0,a.jsx)(a.Fragment,{children:r?(0,a.jsx)("water",{position:[0,t-10,0],ref:e,args:[x,m],"rotation-x":-Math.PI/2,transparent:!0,opacity:.5}):(0,a.jsxs)("mesh",{position:[0,t-10,0],rotation:[-(.5*Math.PI),0,0],children:[(0,a.jsx)("planeGeometry",{args:[d,u]}),(0,a.jsx)("meshStandardMaterial",{color:s,transparent:!0,opacity:o/10})]})})},d=r(8283),h=e=>{let{id:t}=e,r=(0,l.useRef)(null),{progress:i}=(0,d.S)(),{fog:o,noiseIterations:h,amplitude:x,frequency:m,height:g,width:p,sandSolidColor:j,sandColor:f,grassSolidColor:y,grassColor:v}=(0,c.M)(),w=+g,b=+p,C=()=>{if(r.current){let e=[],t=Array(b+1).fill(0).map(()=>Array(w+1).fill(0)),a=(0,s.hA)();for(let e=1;e<h;e++)for(let r=0;r<=b;r++)for(let l=0;l<=w;l++){let n=m/1e3*e,s=a(r*n,l*n)*x,i=s*s*s;t[r][l]=t[r][l]+i}for(let r=0;r<b;r++)for(let a=0;a<w;a++){let l=r,s=a,i=t[r][a],o=t[r][a+1],c=t[r+1][a],u=t[r+1][a+1];e.push(new n.Vector3(l,i,s),new n.Vector3(l,o,s+1),new n.Vector3(l+1,c,s),new n.Vector3(l+1,c,s),new n.Vector3(l,o,s+1),new n.Vector3(l+1,u,s+1))}return r.current.geometry.setFromPoints(e),e}return[]},[N,M]=(0,l.useState)([new n.Vector3]);console.log("xxyyzz",N);let k=e=>{if(r.current){let c=w*b*6,u=()=>{var e=[[.475,.731,.373],[.365,.645,.278],[.298,.543,.224],[.553,.853,.463],[.42,.735,.349]];let t=Math.floor(Math.random()*e.length);return e[t]},d=()=>{var e=[[1,.933,.745],[.918,.847,.62],[.867,.769,.518],[.737,.659,.408],[.627,.553,.333]];let t=Math.floor(Math.random()*e.length);return e[t]};r.current.geometry.setAttribute("color",new n.BufferAttribute(new Float32Array(3*(c||0)),3));for(let h=0;h<(c||0);h++){var t,a,l,s,i,o;let c=e[h];if(c.y>x**3)null===(t=r.current)||void 0===t||t.geometry.attributes.color.setXYZ(h,1,1,1);else if(c.y>2.5)null===(a=r.current)||void 0===a||a.geometry.attributes.color.setXYZ(h,.2,.2,.2);else if(c.y>-2){if(y){let e=u();null===(s=r.current)||void 0===s||s.geometry.attributes.color.setXYZ(h,e[0],e[1],e[2])}else{let e=v.replace("#",""),t=parseInt(e,16),a=new n.Color(t);null===(l=r.current)||void 0===l||l.geometry.attributes.color.setXYZ(h,a.r,a.g,a.b)}}else if(j){let e=d();null===(o=r.current)||void 0===o||o.geometry.attributes.color.setXYZ(h,e[0],e[1],e[2])}else{let e=f.replace("#",""),t=parseInt(e,16),a=new n.Color(t);null===(i=r.current)||void 0===i||i.geometry.attributes.color.setXYZ(h,a.r,a.g,a.b)}}r.current.geometry.attributes.color.needsUpdate=!0,r.current.geometry.computeVertexNormals()}};return(0,l.useEffect)(()=>{if(r.current){let e=C();M(e)}},[]),(0,l.useEffect)(()=>{N.length>10&&k(N)},[N.length,j,f,v,y]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("mesh",{ref:r,position:[-b/2,0,-w/2],castShadow:!0,receiveShadow:!0,children:[(0,a.jsx)("bufferGeometry",{}),(0,a.jsx)("meshStandardMaterial",{vertexColors:!0})]}),o.on?(0,a.jsx)("fog",{attach:"fog",color:"#e8e8e8",near:10,far:800}):null,(0,a.jsx)(u,{})]})}},7075:function(e,t,r){r.d(t,{M:function(){return s}});var a=r(2561),l=r(4475);let n={fog:{intensity:100,on:!0},noiseIterations:8,amplitude:3,frequency:2,waterLevel:3,waterTemplate:!0,waterOpacity:.7,waterColor:"#d4f1f9",width:1e3,height:1e3,sandSolidColor:!0,sandColor:"#C2B280",grassSolidColor:!0,grassColor:"#567d46"},s=(0,a.Ue)()((0,l.tJ)(e=>({...n,updateFog:(t,r)=>e({fog:{intensity:t,on:r}}),updateValue:(t,r)=>e(e=>({...e,[t]:r})),resetTerrain:()=>e(()=>({...n}))}),{name:"config-storage"}))}}]);